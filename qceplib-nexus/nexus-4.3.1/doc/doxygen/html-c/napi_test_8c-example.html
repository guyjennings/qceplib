<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>NeXusDataFormat: napi_test.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">NeXusDataFormat
   &#160;<span id="projectnumber">1</span>
   </div>
   <div id="projectbrief">NeXusCAPI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">napi_test.c</div>  </div>
</div><!--header-->
<div class="contents">
<p>This is the test program for the NeXus C API. It illustrates calling most functions to read and write a file.</p>
<div class="fragment"><div class="line"><span class="comment">/*---------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">  NeXus - Neutron &amp; X-ray Common Data Format</span></div>
<div class="line"><span class="comment">  </span></div>
<div class="line"><span class="comment">  Test program for C API </span></div>
<div class="line"><span class="comment">  </span></div>
<div class="line"><span class="comment">  Copyright (C) 1997-2011 Freddie Akeroyd</span></div>
<div class="line"><span class="comment">  </span></div>
<div class="line"><span class="comment">  This library is free software; you can redistribute it and/or</span></div>
<div class="line"><span class="comment">  modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><span class="comment">  License as published by the Free Software Foundation; either</span></div>
<div class="line"><span class="comment">  version 2 of the License, or (at your option) any later version.</span></div>
<div class="line"><span class="comment"> </span></div>
<div class="line"><span class="comment">  This library is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment">  but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment">  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><span class="comment">  Lesser General Public License for more details.</span></div>
<div class="line"><span class="comment"> </span></div>
<div class="line"><span class="comment">  You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><span class="comment">  License along with this library; if not, write to the Free Software</span></div>
<div class="line"><span class="comment">  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span></div>
<div class="line"><span class="comment">             </span></div>
<div class="line"><span class="comment">  For further information, see &lt;http://www.nexusformat.org&gt;</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">  $Id: napi_test.c 1881 2013-03-06 13:21:55Z Tobias Richter $</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">----------------------------------------------------------------------------*/</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#ifndef _WIN32</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#include &lt;unistd.h&gt;</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#include &quot;napi.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;napiconfig.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> print_data (<span class="keyword">const</span> <span class="keywordtype">char</span> *prefix, <span class="keywordtype">void</span> *data, <span class="keywordtype">int</span> type, <span class="keywordtype">int</span> num);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> testLoadPath();</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> testExternal(<span class="keywordtype">char</span> *progName);</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *relativePathOf(<span class="keyword">const</span> <span class="keywordtype">char</span>* filename) {</div>
<div class="line">  <span class="keywordtype">char</span> cwd[1024];</div>
<div class="line"></div>
<div class="line">  getcwd(cwd, <span class="keyword">sizeof</span>(cwd));</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">if</span> (strncmp(filename, cwd, strlen(cwd)) == 0) </div>
<div class="line">  {</div>
<div class="line">        <span class="keywordflow">return</span> filename+strlen(cwd)+1;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">  {</div>
<div class="line">        <span class="keywordflow">return</span> filename;</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">  <span class="keywordtype">int</span> i, j, k, n, NXrank, NXdims[32], NXtype, NXlen, entry_status, attr_status;</div>
<div class="line">  <span class="keywordtype">float</span> r;</div>
<div class="line">  <span class="keywordtype">void</span> *data_buffer;</div>
<div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> i1_array[4] = {1, 2, 3, 4};</div>
<div class="line">  <span class="keywordtype">short</span> <span class="keywordtype">int</span> i2_array[4] = {1000, 2000, 3000, 4000};</div>
<div class="line">  <span class="keywordtype">int</span> i4_array[4] = {1000000, 2000000, 3000000, 4000000};</div>
<div class="line">  <span class="keywordtype">float</span> r4_array[5][4] =</div>
<div class="line">  {{1., 2., 3., 4.}, {5., 6., 7., 8.}, {9., 10., 11., 12.}, {13., 14., 15., 16.}, {17., 18., 19., 20.}};</div>
<div class="line">  <span class="keywordtype">double</span> r8_array[5][4] =</div>
<div class="line">  {{1., 2., 3., 4.}, {5., 6., 7., 8.}, {9., 10., 11., 12.}, {13., 14., 15., 16.}, {17., 18., 19., 20.}};</div>
<div class="line">  <span class="keywordtype">int</span> array_dims[2] = {5, 4};</div>
<div class="line">  <span class="keywordtype">int</span> unlimited_dims[1] = {NX_UNLIMITED};</div>
<div class="line">  <span class="keywordtype">int</span> chunk_size[2]={5,4};</div>
<div class="line">  <span class="keywordtype">int</span> slab_start[2], slab_size[2];</div>
<div class="line">  <span class="keywordtype">char</span> name[64], char_class[64], char_buffer[128];</div>
<div class="line">  <span class="keywordtype">char</span> group_name[64], class_name[64];</div>
<div class="line">  <span class="keywordtype">char</span> c1_array[5][4] = {{<span class="charliteral">&#39;a&#39;</span>, <span class="charliteral">&#39;b&#39;</span>, <span class="charliteral">&#39;c&#39;</span> ,<span class="charliteral">&#39;d&#39;</span>}, {<span class="charliteral">&#39;e&#39;</span>, <span class="charliteral">&#39;f&#39;</span>, <span class="charliteral">&#39;g&#39;</span> ,<span class="charliteral">&#39;h&#39;</span>}, </div>
<div class="line">     {<span class="charliteral">&#39;i&#39;</span>, <span class="charliteral">&#39;j&#39;</span>, <span class="charliteral">&#39;k&#39;</span>, <span class="charliteral">&#39;l&#39;</span>}, {<span class="charliteral">&#39;m&#39;</span>, <span class="charliteral">&#39;n&#39;</span>, <span class="charliteral">&#39;o&#39;</span>, <span class="charliteral">&#39;p&#39;</span>}, {<span class="charliteral">&#39;q&#39;</span>, <span class="charliteral">&#39;r&#39;</span>, <span class="charliteral">&#39;s&#39;</span> , <span class="charliteral">&#39;t&#39;</span>}};</div>
<div class="line">  <span class="keywordtype">int</span> unlimited_cdims[2] = {NX_UNLIMITED, 4};</div>
<div class="line">  NXhandle fileid, clone_fileid;</div>
<div class="line">  NXlink glink, dlink, blink;</div>
<div class="line">  <span class="keywordtype">int</span> comp_array[100][20];</div>
<div class="line">  <span class="keywordtype">int</span> dims[2];</div>
<div class="line">  <span class="keywordtype">int</span> cdims[2];</div>
<div class="line">  <span class="keywordtype">int</span> nx_creation_code;</div>
<div class="line">  <span class="keywordtype">char</span> nxFile[80];</div>
<div class="line">  <span class="keywordtype">char</span> filename[256];</div>
<div class="line">  int64_t grossezahl[4];</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span>* ch_test_data = <span class="stringliteral">&quot;NeXus &gt;&lt;}&amp;{&#39;\\&amp;\&quot; Data&quot;</span>;</div>
<div class="line">  <span class="keywordtype">char</span> path[512];</div>
<div class="line"></div>
<div class="line">  grossezahl[0] = 12;</div>
<div class="line">  grossezahl[2] = 23;</div>
<div class="line"><span class="preprocessor">#if HAVE_LONG_LONG_INT</span></div>
<div class="line"><span class="preprocessor"></span>  grossezahl[1] = (int64_t)555555555555LL;</div>
<div class="line">  grossezahl[3] = (int64_t)777777777777LL;</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>  grossezahl[1] = (int64_t)555555555555;</div>
<div class="line">  grossezahl[3] = (int64_t)777777777777;</div>
<div class="line"><span class="preprocessor">#endif </span><span class="comment">/* HAVE_LONG_LONG_INT */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">  <span class="keywordflow">if</span>(strstr(argv[0],<span class="stringliteral">&quot;napi_test-hdf5&quot;</span>) != NULL){</div>
<div class="line">    nx_creation_code = NXACC_CREATE5;</div>
<div class="line">    strcpy(nxFile,<span class="stringliteral">&quot;NXtest.h5&quot;</span>);</div>
<div class="line">  }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(strstr(argv[0],<span class="stringliteral">&quot;napi_test-xml-table&quot;</span>) != NULL){</div>
<div class="line">    nx_creation_code = NXACC_CREATEXML | NXACC_TABLE;</div>
<div class="line">    strcpy(nxFile,<span class="stringliteral">&quot;NXtest-table.xml&quot;</span>);</div>
<div class="line">  }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(strstr(argv[0],<span class="stringliteral">&quot;napi_test-xml&quot;</span>) != NULL){</div>
<div class="line">    nx_creation_code = NXACC_CREATEXML;</div>
<div class="line">    strcpy(nxFile,<span class="stringliteral">&quot;NXtest.xml&quot;</span>);</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    nx_creation_code = NXACC_CREATE;</div>
<div class="line">    strcpy(nxFile,<span class="stringliteral">&quot;NXtest.hdf&quot;</span>);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line"><span class="comment">/* create file */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a name="a0"></a><a class="code" href="group__c__init.html#ga1029f545c20f5cf742cfe428bcd6e171" title="Open a NeXus file.">NXopen</a> (nxFile, nx_creation_code, &amp;fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">  <span class="keywordflow">if</span> (nx_creation_code == NXACC_CREATE5)</div>
<div class="line">  {</div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a1"></a><a class="code" href="group__c__init.html#gaa4e8c1adb1d835c0835dbe6696d28be8" title="Opens an existing NeXus file a second time for e.g.">NXreopen</a> (fileid, &amp;clone_fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line">  <a name="a2"></a><a class="code" href="group__c__readwrite.html#gae154c6212b3c89da3e5a987da24e71dc" title="Sets the format for number printing.">NXsetnumberformat</a>(fileid,<a name="a3"></a><a class="code" href="group__c__types.html#gaa6d8b7a88cfbc30f94afd213e4856c3e" title="32 bit float">NX_FLOAT32</a>,<span class="stringliteral">&quot;%9.3f&quot;</span>);</div>
<div class="line">  <span class="keywordflow">if</span> (<a name="a4"></a><a class="code" href="group__c__group.html#ga35de508f85ba74c955ff1bb13d793b4c" title="NeXus groups are NeXus way of structuring information into a hierarchy.">NXmakegroup</a> (fileid, <span class="stringliteral">&quot;entry&quot;</span>, <span class="stringliteral">&quot;NXentry&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">  <span class="keywordflow">if</span> (<a name="a5"></a><a class="code" href="group__c__group.html#ga893fe70fe57383b4e4ca44605d35602d" title="Step into a group.">NXopengroup</a> (fileid, <span class="stringliteral">&quot;entry&quot;</span>, <span class="stringliteral">&quot;NXentry&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">  <span class="keywordflow">if</span>(<a name="a6"></a><a class="code" href="group__c__readwrite.html#ga7045cdb5c627800b98e9fecc114c943a" title="Write an attribute.">NXputattr</a>(fileid,<span class="stringliteral">&quot;hugo&quot;</span>,<span class="stringliteral">&quot;namenlos&quot;</span>,strlen(<span class="stringliteral">&quot;namenlos&quot;</span>), NX_CHAR) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group__c__readwrite.html#ga7045cdb5c627800b98e9fecc114c943a" title="Write an attribute.">NXputattr</a>(fileid,<span class="stringliteral">&quot;cucumber&quot;</span>,<span class="stringliteral">&quot;passion&quot;</span>,strlen(<span class="stringliteral">&quot;passion&quot;</span>), NX_CHAR) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     NXlen = strlen(ch_test_data);</div>
<div class="line">     <span class="keywordflow">if</span> (<a name="a7"></a><a class="code" href="group__c__readwrite.html#gac8d92aaf610d08af92db5783e1f43c30" title="Create a multi dimensional data array or dataset.">NXmakedata</a> (fileid, <span class="stringliteral">&quot;ch_data&quot;</span>, NX_CHAR, 1, &amp;NXlen) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (<a name="a8"></a><a class="code" href="group__c__readwrite.html#gab34bc6ab4c08020ed15bf74e1434915a" title="Open access to a dataset.">NXopendata</a> (fileid, <span class="stringliteral">&quot;ch_data&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a9"></a><a class="code" href="group__c__readwrite.html#ga5d6d2e19d3aa6b7bd4d88b5635b14ecf" title="Write data to a datset which has previouly been opened with NXopendata.">NXputdata</a> (fileid, ch_test_data) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (<a name="a10"></a><a class="code" href="group__c__readwrite.html#ga4020c5577e109cb4ce5d882691be5ee5" title="Close access to a dataset.">NXclosedata</a> (fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gac8d92aaf610d08af92db5783e1f43c30" title="Create a multi dimensional data array or dataset.">NXmakedata</a> (fileid, <span class="stringliteral">&quot;c1_data&quot;</span>, NX_CHAR, 2, array_dims) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gab34bc6ab4c08020ed15bf74e1434915a" title="Open access to a dataset.">NXopendata</a> (fileid, <span class="stringliteral">&quot;c1_data&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga5d6d2e19d3aa6b7bd4d88b5635b14ecf" title="Write data to a datset which has previouly been opened with NXopendata.">NXputdata</a> (fileid, c1_array) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga4020c5577e109cb4ce5d882691be5ee5" title="Close access to a dataset.">NXclosedata</a> (fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gac8d92aaf610d08af92db5783e1f43c30" title="Create a multi dimensional data array or dataset.">NXmakedata</a> (fileid, <span class="stringliteral">&quot;i1_data&quot;</span>, NX_INT8, 1, &amp;array_dims[1]) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gab34bc6ab4c08020ed15bf74e1434915a" title="Open access to a dataset.">NXopendata</a> (fileid, <span class="stringliteral">&quot;i1_data&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga5d6d2e19d3aa6b7bd4d88b5635b14ecf" title="Write data to a datset which has previouly been opened with NXopendata.">NXputdata</a> (fileid, i1_array) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga4020c5577e109cb4ce5d882691be5ee5" title="Close access to a dataset.">NXclosedata</a> (fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gac8d92aaf610d08af92db5783e1f43c30" title="Create a multi dimensional data array or dataset.">NXmakedata</a> (fileid, <span class="stringliteral">&quot;i2_data&quot;</span>, NX_INT16, 1, &amp;array_dims[1]) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gab34bc6ab4c08020ed15bf74e1434915a" title="Open access to a dataset.">NXopendata</a> (fileid, <span class="stringliteral">&quot;i2_data&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga5d6d2e19d3aa6b7bd4d88b5635b14ecf" title="Write data to a datset which has previouly been opened with NXopendata.">NXputdata</a> (fileid, i2_array) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga4020c5577e109cb4ce5d882691be5ee5" title="Close access to a dataset.">NXclosedata</a> (fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gac8d92aaf610d08af92db5783e1f43c30" title="Create a multi dimensional data array or dataset.">NXmakedata</a> (fileid, <span class="stringliteral">&quot;i4_data&quot;</span>, NX_INT32, 1, &amp;array_dims[1]) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gab34bc6ab4c08020ed15bf74e1434915a" title="Open access to a dataset.">NXopendata</a> (fileid, <span class="stringliteral">&quot;i4_data&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga5d6d2e19d3aa6b7bd4d88b5635b14ecf" title="Write data to a datset which has previouly been opened with NXopendata.">NXputdata</a> (fileid, i4_array) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga4020c5577e109cb4ce5d882691be5ee5" title="Close access to a dataset.">NXclosedata</a> (fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (<a name="a11"></a><a class="code" href="group__c__readwrite.html#ga38047042fcbb2c4b2d67daa6dc5ef770" title="Create a compressed dataset.">NXcompmakedata</a> (fileid, <span class="stringliteral">&quot;r4_data&quot;</span>, <a class="code" href="group__c__types.html#gaa6d8b7a88cfbc30f94afd213e4856c3e" title="32 bit float">NX_FLOAT32</a>, 2, array_dims,NX_COMP_LZW,chunk_size) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gab34bc6ab4c08020ed15bf74e1434915a" title="Open access to a dataset.">NXopendata</a> (fileid, <span class="stringliteral">&quot;r4_data&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga5d6d2e19d3aa6b7bd4d88b5635b14ecf" title="Write data to a datset which has previouly been opened with NXopendata.">NXputdata</a> (fileid, r4_array) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga4020c5577e109cb4ce5d882691be5ee5" title="Close access to a dataset.">NXclosedata</a> (fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gac8d92aaf610d08af92db5783e1f43c30" title="Create a multi dimensional data array or dataset.">NXmakedata</a> (fileid, <span class="stringliteral">&quot;r8_data&quot;</span>, NX_FLOAT64, 2, array_dims) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gab34bc6ab4c08020ed15bf74e1434915a" title="Open access to a dataset.">NXopendata</a> (fileid, <span class="stringliteral">&quot;r8_data&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        slab_start[0] = 4; slab_start[1] = 0; slab_size[0] = 1; slab_size[1] = 4;</div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a12"></a><a class="code" href="group__c__readwrite.html#ga53d0e364eece59576e7f0a0004797f45" title="Write a subset of a multi dimensional dataset.">NXputslab</a> (fileid, (<span class="keywordtype">double</span>*)r8_array + 16, slab_start, slab_size) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        slab_start[0] = 0; slab_start[1] = 0; slab_size[0] = 4; slab_size[1] = 4;</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga53d0e364eece59576e7f0a0004797f45" title="Write a subset of a multi dimensional dataset.">NXputslab</a> (fileid, r8_array, slab_start, slab_size) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga7045cdb5c627800b98e9fecc114c943a" title="Write an attribute.">NXputattr</a> (fileid, <span class="stringliteral">&quot;ch_attribute&quot;</span>, ch_test_data, strlen (ch_test_data), NX_CHAR) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        i = 42;</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga7045cdb5c627800b98e9fecc114c943a" title="Write an attribute.">NXputattr</a> (fileid, <span class="stringliteral">&quot;i4_attribute&quot;</span>, &amp;i, 1, NX_INT32) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        r = 3.14159265;</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga7045cdb5c627800b98e9fecc114c943a" title="Write an attribute.">NXputattr</a> (fileid, <span class="stringliteral">&quot;r4_attribute&quot;</span>, &amp;r, 1, <a class="code" href="group__c__types.html#gaa6d8b7a88cfbc30f94afd213e4856c3e" title="32 bit float">NX_FLOAT32</a>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a13"></a><a class="code" href="group__c__linking.html#ga84f5fb042ff616e0d5122d16c7914d83" title="Retrieve link data for a dataset.">NXgetdataID</a> (fileid, &amp;dlink) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga4020c5577e109cb4ce5d882691be5ee5" title="Close access to a dataset.">NXclosedata</a> (fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     dims[0] = 4;</div>
<div class="line">     <span class="keywordflow">if</span> (nx_creation_code != NXACC_CREATE)</div>
<div class="line">     {</div>
<div class="line">       <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gac8d92aaf610d08af92db5783e1f43c30" title="Create a multi dimensional data array or dataset.">NXmakedata</a> (fileid, <span class="stringliteral">&quot;grosse_zahl&quot;</span>, NX_INT64, 1,dims) == NX_OK) {</div>
<div class="line">         <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gab34bc6ab4c08020ed15bf74e1434915a" title="Open access to a dataset.">NXopendata</a> (fileid, <span class="stringliteral">&quot;grosse_zahl&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">         <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga5d6d2e19d3aa6b7bd4d88b5635b14ecf" title="Write data to a datset which has previouly been opened with NXopendata.">NXputdata</a> (fileid, grossezahl) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">         <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga4020c5577e109cb4ce5d882691be5ee5" title="Close access to a dataset.">NXclosedata</a> (fileid) != NX_OK) <span class="keywordflow">return</span> 1;  </div>
<div class="line">       }</div>
<div class="line">     }</div>
<div class="line">     <span class="keywordflow">if</span> (<a class="code" href="group__c__group.html#ga35de508f85ba74c955ff1bb13d793b4c" title="NeXus groups are NeXus way of structuring information into a hierarchy.">NXmakegroup</a> (fileid, <span class="stringliteral">&quot;data&quot;</span>, <span class="stringliteral">&quot;NXdata&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (<a class="code" href="group__c__group.html#ga893fe70fe57383b4e4ca44605d35602d" title="Step into a group.">NXopengroup</a> (fileid, <span class="stringliteral">&quot;data&quot;</span>, <span class="stringliteral">&quot;NXdata&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a14"></a><a class="code" href="group__c__linking.html#ga0fdb70892f8409d1cfc8d6dded2b51a6" title="Create a link to the group or dataset described by pLink in the currently open group.">NXmakelink</a> (fileid, &amp;dlink) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        dims[0] = 100;</div>
<div class="line">        dims[1] = 20;</div>
<div class="line">        <span class="keywordflow">for</span>(i = 0; i &lt; 100; i++)</div>
<div class="line">            {</div>
<div class="line">            <span class="keywordflow">for</span>(j = 0; j &lt; 20; j++)</div>
<div class="line">               {</div>
<div class="line">                 comp_array[i][j] = i;</div>
<div class="line">               }</div>
<div class="line">            }</div>
<div class="line">        cdims[0] = 20;</div>
<div class="line">        cdims[1] = 20;</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga38047042fcbb2c4b2d67daa6dc5ef770" title="Create a compressed dataset.">NXcompmakedata</a> (fileid, <span class="stringliteral">&quot;comp_data&quot;</span>, NX_INT32, 2, dims, NX_COMP_LZW, cdims) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gab34bc6ab4c08020ed15bf74e1434915a" title="Open access to a dataset.">NXopendata</a> (fileid, <span class="stringliteral">&quot;comp_data&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">           <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga5d6d2e19d3aa6b7bd4d88b5635b14ecf" title="Write data to a datset which has previouly been opened with NXopendata.">NXputdata</a> (fileid, comp_array) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga4020c5577e109cb4ce5d882691be5ee5" title="Close access to a dataset.">NXclosedata</a> (fileid) != NX_OK) <span class="keywordflow">return</span> 1;  </div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a15"></a><a class="code" href="group__c__readwrite.html#gaa4e69c600aa1c292a4c1882b0013900a" title="flush data to disk">NXflush</a> (&amp;fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gac8d92aaf610d08af92db5783e1f43c30" title="Create a multi dimensional data array or dataset.">NXmakedata</a> (fileid, <span class="stringliteral">&quot;flush_data&quot;</span>, NX_INT32, 1, unlimited_dims) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        slab_size[0] = 1;</div>
<div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt; 7; i++)</div>
<div class="line">            {</div>
<div class="line">              slab_start[0] = i;</div>
<div class="line">              <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gab34bc6ab4c08020ed15bf74e1434915a" title="Open access to a dataset.">NXopendata</a> (fileid, <span class="stringliteral">&quot;flush_data&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga53d0e364eece59576e7f0a0004797f45" title="Write a subset of a multi dimensional dataset.">NXputslab</a> (fileid, &amp;i, slab_start, slab_size) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gaa4e69c600aa1c292a4c1882b0013900a" title="flush data to disk">NXflush</a> (&amp;fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        }</div>
<div class="line">     <span class="keywordflow">if</span> (<a name="a16"></a><a class="code" href="group__c__group.html#ga90b46dc464fc56ac6c2a360e2120f1bd" title="Closes the currently open group and steps one step down in the NeXus file hierarchy.">NXclosegroup</a> (fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (<a class="code" href="group__c__group.html#ga35de508f85ba74c955ff1bb13d793b4c" title="NeXus groups are NeXus way of structuring information into a hierarchy.">NXmakegroup</a> (fileid, <span class="stringliteral">&quot;sample&quot;</span>, <span class="stringliteral">&quot;NXsample&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (<a class="code" href="group__c__group.html#ga893fe70fe57383b4e4ca44605d35602d" title="Step into a group.">NXopengroup</a> (fileid, <span class="stringliteral">&quot;sample&quot;</span>, <span class="stringliteral">&quot;NXsample&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        NXlen = 12;</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gac8d92aaf610d08af92db5783e1f43c30" title="Create a multi dimensional data array or dataset.">NXmakedata</a> (fileid, <span class="stringliteral">&quot;ch_data&quot;</span>, NX_CHAR, 1, &amp;NXlen) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gab34bc6ab4c08020ed15bf74e1434915a" title="Open access to a dataset.">NXopendata</a> (fileid, <span class="stringliteral">&quot;ch_data&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">           <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga5d6d2e19d3aa6b7bd4d88b5635b14ecf" title="Write data to a datset which has previouly been opened with NXopendata.">NXputdata</a> (fileid, <span class="stringliteral">&quot;NeXus sample&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga4020c5577e109cb4ce5d882691be5ee5" title="Close access to a dataset.">NXclosedata</a> (fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a17"></a><a class="code" href="group__c__linking.html#gad9bf2a7efb658fe450ea430c284d33ad" title="Retrieve link data for the currently open group.">NXgetgroupID</a> (fileid, &amp;glink) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        <span class="keywordflow">if</span> (( nx_creation_code &amp; NXACC_CREATEXML) == 0 ) {</div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gac8d92aaf610d08af92db5783e1f43c30" title="Create a multi dimensional data array or dataset.">NXmakedata</a> (fileid, <span class="stringliteral">&quot;cdata_unlimited&quot;</span>, NX_CHAR, 2, unlimited_cdims) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gab34bc6ab4c08020ed15bf74e1434915a" title="Open access to a dataset.">NXopendata</a> (fileid, <span class="stringliteral">&quot;cdata_unlimited&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">            slab_size[0] = 1;</div>
<div class="line">            slab_size[1] = 4;</div>
<div class="line">            slab_start[1] = 0;</div>
<div class="line">            <span class="keywordflow">for</span> (i = 0; i &lt; 5; i++)</div>
<div class="line">            {</div>
<div class="line">               slab_start[0] = i;</div>
<div class="line">               <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga53d0e364eece59576e7f0a0004797f45" title="Write a subset of a multi dimensional dataset.">NXputslab</a> (fileid, &amp;(c1_array[i][0]), slab_start, slab_size) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga4020c5577e109cb4ce5d882691be5ee5" title="Close access to a dataset.">NXclosedata</a> (fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        }</div>
<div class="line">     <span class="keywordflow">if</span> (<a class="code" href="group__c__group.html#ga90b46dc464fc56ac6c2a360e2120f1bd" title="Closes the currently open group and steps one step down in the NeXus file hierarchy.">NXclosegroup</a> (fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__c__group.html#ga90b46dc464fc56ac6c2a360e2120f1bd" title="Closes the currently open group and steps one step down in the NeXus file hierarchy.">NXclosegroup</a> (fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__c__group.html#ga35de508f85ba74c955ff1bb13d793b4c" title="NeXus groups are NeXus way of structuring information into a hierarchy.">NXmakegroup</a> (fileid, <span class="stringliteral">&quot;link&quot;</span>, <span class="stringliteral">&quot;NXentry&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__c__group.html#ga893fe70fe57383b4e4ca44605d35602d" title="Step into a group.">NXopengroup</a> (fileid, <span class="stringliteral">&quot;link&quot;</span>, <span class="stringliteral">&quot;NXentry&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (<a class="code" href="group__c__linking.html#ga0fdb70892f8409d1cfc8d6dded2b51a6" title="Create a link to the group or dataset described by pLink in the currently open group.">NXmakelink</a> (fileid, &amp;glink) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (<a name="a18"></a><a class="code" href="group__c__linking.html#ga8b6e43dce0a54b50a50521d24e68e508" title="Create a link to the group or dataset described by pLink in the currently open group.">NXmakenamedlink</a> (fileid,<span class="stringliteral">&quot;renLinkGroup&quot;</span>, &amp;glink) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (<a class="code" href="group__c__linking.html#ga8b6e43dce0a54b50a50521d24e68e508" title="Create a link to the group or dataset described by pLink in the currently open group.">NXmakenamedlink</a> (fileid, <span class="stringliteral">&quot;renLinkData&quot;</span>, &amp;dlink) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__c__group.html#ga90b46dc464fc56ac6c2a360e2120f1bd" title="Closes the currently open group and steps one step down in the NeXus file hierarchy.">NXclosegroup</a> (fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">  <span class="keywordflow">if</span> (<a name="a19"></a><a class="code" href="group__c__init.html#ga6a770fcad81040878ac24123e4789744" title="close a NeXus file">NXclose</a> (&amp;fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> ( (argc &gt;= 2) &amp;&amp; !strcmp(argv[1], <span class="stringliteral">&quot;-q&quot;</span>) )</div>
<div class="line">  {</div>
<div class="line">     <span class="keywordflow">return</span> 0;  <span class="comment">/* create only */</span></div>
<div class="line">  }</div>
<div class="line">  <span class="comment">/*</span></div>
<div class="line"><span class="comment">    read test</span></div>
<div class="line"><span class="comment">  */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__c__init.html#ga1029f545c20f5cf742cfe428bcd6e171" title="Open a NeXus file.">NXopen</a> (nxFile, NXACC_RDWR,&amp;fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">  <span class="keywordflow">if</span>(<a name="a20"></a><a class="code" href="group__c__metadata.html#ga8539ec124494aaebfd05271e88ee1dd0" title="Inquire the filename of the currently open file.">NXinquirefile</a>(fileid,filename,256) != NX_OK){</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line">  printf(<span class="stringliteral">&quot;NXinquirefile found: %s\n&quot;</span>, relativePathOf(filename));</div>
<div class="line">  <a name="a21"></a><a class="code" href="group__c__metadata.html#ga5a0b13a516cd60ca2442d545c208f84d" title="Get the count of attributes in the currently open dataset, group or global attributes when at root le...">NXgetattrinfo</a> (fileid, &amp;i);</div>
<div class="line">  <span class="keywordflow">if</span> (i &gt; 0) {</div>
<div class="line">     printf (<span class="stringliteral">&quot;Number of global attributes: %d\n&quot;</span>, i);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">do</span> { </div>
<div class="line">     attr_status = <a name="a22"></a><a class="code" href="group__c__readwrite.html#ga9e80a917bece33018fada8fe8305f88d" title="Iterate over global, group or dataset attributes depending on the currently open group or dataset...">NXgetnextattr</a> (fileid, name, NXdims, &amp;NXtype);</div>
<div class="line">     <span class="keywordflow">if</span> (attr_status == NX_ERROR) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (attr_status == NX_OK) {</div>
<div class="line">        <span class="keywordflow">switch</span> (NXtype) {</div>
<div class="line">           <span class="keywordflow">case</span> NX_CHAR:</div>
<div class="line">              NXlen = <span class="keyword">sizeof</span> (char_buffer);</div>
<div class="line">              <span class="keywordflow">if</span> (<a name="a23"></a><a class="code" href="group__c__readwrite.html#gaced243ab1332cb1588db17384b04f07c" title="Read an attribute.">NXgetattr</a> (fileid, name, char_buffer, &amp;NXlen, &amp;NXtype) </div>
<div class="line">                  != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">                <span class="keywordflow">if</span> ( strcmp(name, <span class="stringliteral">&quot;file_time&quot;</span>) &amp;&amp;</div>
<div class="line">                     strcmp(name, <span class="stringliteral">&quot;HDF_version&quot;</span>) &amp;&amp;</div>
<div class="line">                     strcmp(name, <span class="stringliteral">&quot;HDF5_Version&quot;</span>) &amp;&amp;</div>
<div class="line">                     strcmp(name, <span class="stringliteral">&quot;XML_version&quot;</span>) )</div>
<div class="line">                {</div>
<div class="line">                 printf (<span class="stringliteral">&quot;   %s = %s\n&quot;</span>, name, char_buffer);</div>
<div class="line">                }</div>
<div class="line">              <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">     }</div>
<div class="line">  } <span class="keywordflow">while</span> (attr_status == NX_OK);</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__c__group.html#ga893fe70fe57383b4e4ca44605d35602d" title="Step into a group.">NXopengroup</a> (fileid, <span class="stringliteral">&quot;entry&quot;</span>, <span class="stringliteral">&quot;NXentry&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">  <a class="code" href="group__c__metadata.html#ga5a0b13a516cd60ca2442d545c208f84d" title="Get the count of attributes in the currently open dataset, group or global attributes when at root le...">NXgetattrinfo</a>(fileid,&amp;i);</div>
<div class="line">  printf(<span class="stringliteral">&quot;Number of group attributes: %d\n&quot;</span>, i);</div>
<div class="line">  <span class="keywordflow">if</span>(<a name="a24"></a><a class="code" href="group__c__navigation.html#gad611b858df480c5e210ae4645d26dd84" title="Retrieve the current path in the NeXus file.">NXgetpath</a>(fileid,path,512) != NX_OK)<span class="keywordflow">return</span> 1;</div>
<div class="line">  printf(<span class="stringliteral">&quot;NXentry path %s\n&quot;</span>, path);</div>
<div class="line">  <span class="keywordflow">do</span> { </div>
<div class="line">     attr_status = <a class="code" href="group__c__readwrite.html#ga9e80a917bece33018fada8fe8305f88d" title="Iterate over global, group or dataset attributes depending on the currently open group or dataset...">NXgetnextattr</a> (fileid, name, NXdims, &amp;NXtype);</div>
<div class="line">     <span class="keywordflow">if</span> (attr_status == NX_ERROR) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (attr_status == NX_OK) {</div>
<div class="line">        <span class="keywordflow">switch</span> (NXtype) {</div>
<div class="line">           <span class="keywordflow">case</span> NX_CHAR:</div>
<div class="line">              NXlen = <span class="keyword">sizeof</span> (char_buffer);</div>
<div class="line">              <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gaced243ab1332cb1588db17384b04f07c" title="Read an attribute.">NXgetattr</a> (fileid, name, char_buffer, &amp;NXlen, &amp;NXtype) </div>
<div class="line">                  != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">                 printf (<span class="stringliteral">&quot;   %s = %s\n&quot;</span>, name, char_buffer);</div>
<div class="line">        }</div>
<div class="line">     }</div>
<div class="line">  } <span class="keywordflow">while</span> (attr_status == NX_OK);</div>
<div class="line">  <span class="keywordflow">if</span> (<a name="a25"></a><a class="code" href="group__c__metadata.html#ga72712ab4f5ba5cf87275e3bcc8bed04f" title="Retrieve information about the currently open group.">NXgetgroupinfo</a> (fileid, &amp;i, group_name, class_name) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">     printf (<span class="stringliteral">&quot;Group: %s(%s) contains %d items\n&quot;</span>, group_name, class_name, i);</div>
<div class="line">  <span class="keywordflow">do</span> {</div>
<div class="line">     entry_status = <a name="a26"></a><a class="code" href="group__c__navigation.html#gafaf3aca7983e4cfef35835b6039f91df" title="Get the next entry in the currently open group.">NXgetnextentry</a> (fileid, name, char_class, &amp;NXtype);</div>
<div class="line">     <span class="keywordflow">if</span> (entry_status == NX_ERROR) <span class="keywordflow">return</span> 1;</div>
<div class="line">     <span class="keywordflow">if</span> (strcmp(char_class,<span class="stringliteral">&quot;SDS&quot;</span>) != 0) {</div>
<div class="line">        <span class="keywordflow">if</span> (entry_status != NX_EOD) {</div>
<div class="line">           printf (<span class="stringliteral">&quot;   Subgroup: %s(%s)\n&quot;</span>, name, char_class);</div>
<div class="line">           entry_status = NX_OK;</div>
<div class="line">        }</div>
<div class="line">     } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">if</span> (entry_status == NX_OK) {</div>
<div class="line">           <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gab34bc6ab4c08020ed15bf74e1434915a" title="Open access to a dataset.">NXopendata</a> (fileid, name) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">            <span class="keywordflow">if</span>(<a class="code" href="group__c__navigation.html#gad611b858df480c5e210ae4645d26dd84" title="Retrieve the current path in the NeXus file.">NXgetpath</a>(fileid,path,512) != NX_OK)<span class="keywordflow">return</span> 1;</div>
<div class="line">            printf(<span class="stringliteral">&quot;Data path %s\n&quot;</span>, path);</div>
<div class="line">            <span class="keywordflow">if</span> (<a name="a27"></a><a class="code" href="group__c__metadata.html#gad43631cf8ce2787ae16eb0ca08c30e7e" title="Retrieve information about the curretly open dataset.">NXgetinfo</a> (fileid, &amp;NXrank, NXdims, &amp;NXtype) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">                 printf (<span class="stringliteral">&quot;   %s(%d)&quot;</span>, name, NXtype);</div>
<div class="line">              <span class="keywordflow">if</span> (<a name="a28"></a><a class="code" href="group__c__memory.html#gaeb61e2fac77392e6615531248966a357" title="Utility function which allocates a suitably sized memory area for the dataset characteristics specifi...">NXmalloc</a> ((<span class="keywordtype">void</span> **) &amp;data_buffer, NXrank, NXdims, NXtype) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">              n = 1;</div>
<div class="line">              <span class="keywordflow">for</span>(k=0; k&lt;NXrank; k++)</div>
<div class="line">              {</div>
<div class="line">                  n *= NXdims[k];</div>
<div class="line">              }</div>
<div class="line">              <span class="keywordflow">if</span> (NXtype == NX_CHAR) {</div>
<div class="line">                 <span class="keywordflow">if</span> (<a name="a29"></a><a class="code" href="group__c__readwrite.html#gaf6cb2eb0ddebb3a3f632f8288f43dea0" title="Read a complete dataset from the currently open dataset into memory.">NXgetdata</a> (fileid, data_buffer) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">                    print_data (<span class="stringliteral">&quot; = &quot;</span>, data_buffer, NXtype, n);</div>
<div class="line">              } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NXtype != <a class="code" href="group__c__types.html#gaa6d8b7a88cfbc30f94afd213e4856c3e" title="32 bit float">NX_FLOAT32</a> &amp;&amp; NXtype != NX_FLOAT64) {</div>
<div class="line">                 <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gaf6cb2eb0ddebb3a3f632f8288f43dea0" title="Read a complete dataset from the currently open dataset into memory.">NXgetdata</a> (fileid, data_buffer) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">                    print_data (<span class="stringliteral">&quot; = &quot;</span>, data_buffer, NXtype, n);</div>
<div class="line">              } <span class="keywordflow">else</span> {</div>
<div class="line">                 slab_start[0] = 0;</div>
<div class="line">                 slab_start[1] = 0;</div>
<div class="line">                 slab_size[0] = 1;</div>
<div class="line">                 slab_size[1] = 4;</div>
<div class="line">                 <span class="keywordflow">if</span> (<a name="a30"></a><a class="code" href="group__c__readwrite.html#ga1e4130bc0a09978015181095536c35d4" title="Read a subset of data from file into memory.">NXgetslab</a> (fileid, data_buffer, slab_start, slab_size) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">                    print_data (<span class="stringliteral">&quot;\n      &quot;</span>, data_buffer, NXtype, 4);</div>
<div class="line">                 slab_start[0] = 1;</div>
<div class="line">                 <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga1e4130bc0a09978015181095536c35d4" title="Read a subset of data from file into memory.">NXgetslab</a> (fileid, data_buffer, slab_start, slab_size) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">                    print_data (<span class="stringliteral">&quot;      &quot;</span>, data_buffer, NXtype, 4);</div>
<div class="line">                 slab_start[0] = 2;</div>
<div class="line">                 <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga1e4130bc0a09978015181095536c35d4" title="Read a subset of data from file into memory.">NXgetslab</a> (fileid, data_buffer, slab_start, slab_size) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">                    print_data (<span class="stringliteral">&quot;      &quot;</span>, data_buffer, NXtype, 4);</div>
<div class="line">                 slab_start[0] = 3;</div>
<div class="line">                 <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga1e4130bc0a09978015181095536c35d4" title="Read a subset of data from file into memory.">NXgetslab</a> (fileid, data_buffer, slab_start, slab_size) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">                    print_data (<span class="stringliteral">&quot;      &quot;</span>, data_buffer, NXtype, 4);</div>
<div class="line">                 slab_start[0] = 4;</div>
<div class="line">                 <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga1e4130bc0a09978015181095536c35d4" title="Read a subset of data from file into memory.">NXgetslab</a> (fileid, data_buffer, slab_start, slab_size) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">                    print_data (<span class="stringliteral">&quot;      &quot;</span>, data_buffer, NXtype, 4);</div>
<div class="line">                 <span class="keywordflow">if</span> (<a class="code" href="group__c__metadata.html#ga5a0b13a516cd60ca2442d545c208f84d" title="Get the count of attributes in the currently open dataset, group or global attributes when at root le...">NXgetattrinfo</a> (fileid, &amp;i) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">                 <span class="keywordflow">if</span> (i &gt; 0) {</div>
<div class="line">                    printf (<span class="stringliteral">&quot;      Number of attributes : %d\n&quot;</span>, i);</div>
<div class="line">                 }</div>
<div class="line">                 <span class="keywordflow">do</span> {</div>
<div class="line">                    attr_status = <a class="code" href="group__c__readwrite.html#ga9e80a917bece33018fada8fe8305f88d" title="Iterate over global, group or dataset attributes depending on the currently open group or dataset...">NXgetnextattr</a> (fileid, name, NXdims, &amp;NXtype);</div>
<div class="line">                    <span class="keywordflow">if</span> (attr_status == NX_ERROR) <span class="keywordflow">return</span> 1;</div>
<div class="line">                    <span class="keywordflow">if</span> (attr_status == NX_OK) {</div>
<div class="line">                       <span class="keywordflow">switch</span> (NXtype) {</div>
<div class="line">                          <span class="keywordflow">case</span> NX_INT32:</div>
<div class="line">                             NXlen = 1;</div>
<div class="line">                             <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gaced243ab1332cb1588db17384b04f07c" title="Read an attribute.">NXgetattr</a> (fileid, name, &amp;i, &amp;NXlen, &amp;NXtype) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">                                printf (<span class="stringliteral">&quot;         %s : %d\n&quot;</span>, name, i);</div>
<div class="line">                             <span class="keywordflow">break</span>;</div>
<div class="line">                          <span class="keywordflow">case</span> <a class="code" href="group__c__types.html#gaa6d8b7a88cfbc30f94afd213e4856c3e" title="32 bit float">NX_FLOAT32</a>:</div>
<div class="line">                             NXlen = 1;</div>
<div class="line">                             <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gaced243ab1332cb1588db17384b04f07c" title="Read an attribute.">NXgetattr</a> (fileid, name, &amp;r, &amp;NXlen, &amp;NXtype) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">                                printf (<span class="stringliteral">&quot;         %s : %f\n&quot;</span>, name, r);</div>
<div class="line">                             <span class="keywordflow">break</span>;</div>
<div class="line">                          <span class="keywordflow">case</span> NX_CHAR:</div>
<div class="line">                             NXlen = <span class="keyword">sizeof</span> (char_buffer);</div>
<div class="line">                             <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gaced243ab1332cb1588db17384b04f07c" title="Read an attribute.">NXgetattr</a> (fileid, name, char_buffer, &amp;NXlen, &amp;NXtype) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">                                printf (<span class="stringliteral">&quot;         %s : %s\n&quot;</span>, name, char_buffer);</div>
<div class="line">                             <span class="keywordflow">break</span>;</div>
<div class="line">                       }</div>
<div class="line">                    } </div>
<div class="line">                 } <span class="keywordflow">while</span> (attr_status == NX_OK);</div>
<div class="line">              }</div>
<div class="line">           <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga4020c5577e109cb4ce5d882691be5ee5" title="Close access to a dataset.">NXclosedata</a> (fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">           <span class="keywordflow">if</span> (<a name="a31"></a><a class="code" href="group__c__memory.html#gaccbb43e903b075349ad12a35a7dbd373" title="Utility function to release the memory for data.">NXfree</a> ((<span class="keywordtype">void</span> **) &amp;data_buffer) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        }</div>
<div class="line">     }</div>
<div class="line">  } <span class="keywordflow">while</span> (entry_status == NX_OK);</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__c__group.html#ga90b46dc464fc56ac6c2a360e2120f1bd" title="Closes the currently open group and steps one step down in the NeXus file hierarchy.">NXclosegroup</a> (fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * check links</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__c__group.html#ga893fe70fe57383b4e4ca44605d35602d" title="Step into a group.">NXopengroup</a> (fileid, <span class="stringliteral">&quot;entry&quot;</span>, <span class="stringliteral">&quot;NXentry&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__c__group.html#ga893fe70fe57383b4e4ca44605d35602d" title="Step into a group.">NXopengroup</a> (fileid, <span class="stringliteral">&quot;sample&quot;</span>, <span class="stringliteral">&quot;NXsample&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="group__c__linking.html#gad9bf2a7efb658fe450ea430c284d33ad" title="Retrieve link data for the currently open group.">NXgetgroupID</a> (fileid, &amp;glink) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__c__group.html#ga90b46dc464fc56ac6c2a360e2120f1bd" title="Closes the currently open group and steps one step down in the NeXus file hierarchy.">NXclosegroup</a> (fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__c__group.html#ga893fe70fe57383b4e4ca44605d35602d" title="Step into a group.">NXopengroup</a> (fileid, <span class="stringliteral">&quot;data&quot;</span>, <span class="stringliteral">&quot;NXdata&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gab34bc6ab4c08020ed15bf74e1434915a" title="Open access to a dataset.">NXopendata</a> (fileid, <span class="stringliteral">&quot;r8_data&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__c__linking.html#ga84f5fb042ff616e0d5122d16c7914d83" title="Retrieve link data for a dataset.">NXgetdataID</a> (fileid, &amp;dlink) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga4020c5577e109cb4ce5d882691be5ee5" title="Close access to a dataset.">NXclosedata</a> (fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__c__group.html#ga90b46dc464fc56ac6c2a360e2120f1bd" title="Closes the currently open group and steps one step down in the NeXus file hierarchy.">NXclosegroup</a> (fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gab34bc6ab4c08020ed15bf74e1434915a" title="Open access to a dataset.">NXopendata</a> (fileid, <span class="stringliteral">&quot;r8_data&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="group__c__linking.html#ga84f5fb042ff616e0d5122d16c7914d83" title="Retrieve link data for a dataset.">NXgetdataID</a> (fileid, &amp;blink) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga4020c5577e109cb4ce5d882691be5ee5" title="Close access to a dataset.">NXclosedata</a> (fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a32"></a><a class="code" href="group__c__linking.html#gab68789066619009601e8f65dff8c1364" title="Tests if two link data structures describe the same item.">NXsameID</a>(fileid, &amp;dlink, &amp;blink) != NX_OK)</div>
<div class="line">    {</div>
<div class="line">         printf (<span class="stringliteral">&quot;Link check FAILED (r8_data)\n&quot;</span>);</div>
<div class="line">         printf (<span class="stringliteral">&quot;original data\n&quot;</span>);</div>
<div class="line">         NXIprintlink(fileid, &amp;dlink);</div>
<div class="line">         printf (<span class="stringliteral">&quot;linked data\n&quot;</span>);</div>
<div class="line">         NXIprintlink(fileid, &amp;blink);</div>
<div class="line">         <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__c__group.html#ga90b46dc464fc56ac6c2a360e2120f1bd" title="Closes the currently open group and steps one step down in the NeXus file hierarchy.">NXclosegroup</a> (fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__c__group.html#ga893fe70fe57383b4e4ca44605d35602d" title="Step into a group.">NXopengroup</a> (fileid, <span class="stringliteral">&quot;link&quot;</span>, <span class="stringliteral">&quot;NXentry&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__c__group.html#ga893fe70fe57383b4e4ca44605d35602d" title="Step into a group.">NXopengroup</a> (fileid, <span class="stringliteral">&quot;sample&quot;</span>, <span class="stringliteral">&quot;NXsample&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">    <span class="keywordflow">if</span>(<a class="code" href="group__c__navigation.html#gad611b858df480c5e210ae4645d26dd84" title="Retrieve the current path in the NeXus file.">NXgetpath</a>(fileid,path,512) != NX_OK)<span class="keywordflow">return</span> 1;</div>
<div class="line">    printf(<span class="stringliteral">&quot;Group path %s\n&quot;</span>, path);</div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="group__c__linking.html#gad9bf2a7efb658fe450ea430c284d33ad" title="Retrieve link data for the currently open group.">NXgetgroupID</a> (fileid, &amp;blink) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__c__linking.html#gab68789066619009601e8f65dff8c1364" title="Tests if two link data structures describe the same item.">NXsameID</a>(fileid, &amp;glink, &amp;blink) != NX_OK)</div>
<div class="line">        {</div>
<div class="line">             printf (<span class="stringliteral">&quot;Link check FAILED (sample)\n&quot;</span>);</div>
<div class="line">             printf (<span class="stringliteral">&quot;original group\n&quot;</span>);</div>
<div class="line">             NXIprintlink(fileid, &amp;glink);</div>
<div class="line">             printf (<span class="stringliteral">&quot;linked group\n&quot;</span>);</div>
<div class="line">             NXIprintlink(fileid, &amp;blink);</div>
<div class="line">             <span class="keywordflow">return</span> 1;</div>
<div class="line">        }</div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="group__c__group.html#ga90b46dc464fc56ac6c2a360e2120f1bd" title="Closes the currently open group and steps one step down in the NeXus file hierarchy.">NXclosegroup</a> (fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__c__group.html#ga893fe70fe57383b4e4ca44605d35602d" title="Step into a group.">NXopengroup</a> (fileid, <span class="stringliteral">&quot;renLinkGroup&quot;</span>, <span class="stringliteral">&quot;NXsample&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="group__c__linking.html#gad9bf2a7efb658fe450ea430c284d33ad" title="Retrieve link data for the currently open group.">NXgetgroupID</a> (fileid, &amp;blink) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__c__linking.html#gab68789066619009601e8f65dff8c1364" title="Tests if two link data structures describe the same item.">NXsameID</a>(fileid, &amp;glink, &amp;blink) != NX_OK)</div>
<div class="line">        {</div>
<div class="line">             printf (<span class="stringliteral">&quot;Link check FAILED (renLinkGroup)\n&quot;</span>);</div>
<div class="line">             printf (<span class="stringliteral">&quot;original group\n&quot;</span>);</div>
<div class="line">             NXIprintlink(fileid, &amp;glink);</div>
<div class="line">             printf (<span class="stringliteral">&quot;linked group\n&quot;</span>);</div>
<div class="line">             NXIprintlink(fileid, &amp;blink);</div>
<div class="line">             <span class="keywordflow">return</span> 1;</div>
<div class="line">        }</div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="group__c__group.html#ga90b46dc464fc56ac6c2a360e2120f1bd" title="Closes the currently open group and steps one step down in the NeXus file hierarchy.">NXclosegroup</a> (fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(<a class="code" href="group__c__readwrite.html#gab34bc6ab4c08020ed15bf74e1434915a" title="Open access to a dataset.">NXopendata</a>(fileid,<span class="stringliteral">&quot;renLinkData&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">      <span class="keywordflow">if</span>(<a class="code" href="group__c__linking.html#ga84f5fb042ff616e0d5122d16c7914d83" title="Retrieve link data for a dataset.">NXgetdataID</a>(fileid,&amp;blink) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__c__linking.html#gab68789066619009601e8f65dff8c1364" title="Tests if two link data structures describe the same item.">NXsameID</a>(fileid, &amp;dlink, &amp;blink) != NX_OK)</div>
<div class="line">        {</div>
<div class="line">             printf (<span class="stringliteral">&quot;Link check FAILED (renLinkData)\n&quot;</span>);</div>
<div class="line">             printf (<span class="stringliteral">&quot;original group\n&quot;</span>);</div>
<div class="line">             NXIprintlink(fileid, &amp;glink);</div>
<div class="line">             printf (<span class="stringliteral">&quot;linked group\n&quot;</span>);</div>
<div class="line">             NXIprintlink(fileid, &amp;blink);</div>
<div class="line">             <span class="keywordflow">return</span> 1;</div>
<div class="line">        }</div>
<div class="line">    <span class="keywordflow">if</span>(<a class="code" href="group__c__readwrite.html#ga4020c5577e109cb4ce5d882691be5ee5" title="Close access to a dataset.">NXclosedata</a>(fileid) != NX_OK) <span class="keywordflow">return</span> 1;  </div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__c__group.html#ga90b46dc464fc56ac6c2a360e2120f1bd" title="Closes the currently open group and steps one step down in the NeXus file hierarchy.">NXclosegroup</a> (fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">  printf (<span class="stringliteral">&quot;Link check OK\n&quot;</span>);</div>
<div class="line"></div>
<div class="line">  <span class="comment">/*</span></div>
<div class="line"><span class="comment">    tests for NXopenpath</span></div>
<div class="line"><span class="comment">  */</span></div>
<div class="line">  <span class="keywordflow">if</span>(<a name="a33"></a><a class="code" href="group__c__navigation.html#ga5cb53e2453d85e15de10d1601d790dd2" title="Open the NeXus object with the path specified.">NXopenpath</a>(fileid,<span class="stringliteral">&quot;/entry/data/comp_data&quot;</span>) != NX_OK){</div>
<div class="line">    printf(<span class="stringliteral">&quot;Failure on NXopenpath\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group__c__navigation.html#ga5cb53e2453d85e15de10d1601d790dd2" title="Open the NeXus object with the path specified.">NXopenpath</a>(fileid,<span class="stringliteral">&quot;/entry/data/comp_data&quot;</span>) != NX_OK){</div>
<div class="line">    printf(<span class="stringliteral">&quot;Failure on NXopenpath\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group__c__navigation.html#ga5cb53e2453d85e15de10d1601d790dd2" title="Open the NeXus object with the path specified.">NXopenpath</a>(fileid,<span class="stringliteral">&quot;../r8_data&quot;</span>) != NX_OK){</div>
<div class="line">    printf(<span class="stringliteral">&quot;Failure on NXopenpath\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span>(<a name="a34"></a><a class="code" href="group__c__navigation.html#ga682adda0414598bff404e72ee568365b" title="Opens the group in which the NeXus object with the specified path exists.">NXopengrouppath</a>(fileid,<span class="stringliteral">&quot;/entry/data/comp_data&quot;</span>) != NX_OK){</div>
<div class="line">    printf(<span class="stringliteral">&quot;Failure on NXopengrouppath\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group__c__navigation.html#ga5cb53e2453d85e15de10d1601d790dd2" title="Open the NeXus object with the path specified.">NXopenpath</a>(fileid,<span class="stringliteral">&quot;/entry/data/r8_data&quot;</span>) != NX_OK){</div>
<div class="line">    printf(<span class="stringliteral">&quot;Failure on NXopenpath\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">  }</div>
<div class="line">  printf(<span class="stringliteral">&quot;NXopenpath checks OK\n&quot;</span>);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__c__init.html#ga6a770fcad81040878ac24123e4789744" title="close a NeXus file">NXclose</a> (&amp;fileid) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line"></div>
<div class="line">  printf(<span class="stringliteral">&quot;before load path tests\n&quot;</span>);</div>
<div class="line">  <span class="keywordflow">if</span>(testLoadPath() != 0) <span class="keywordflow">return</span> 1;</div>
<div class="line"></div>
<div class="line">  printf(<span class="stringliteral">&quot;before external link tests\n&quot;</span>);</div>
<div class="line">  <span class="keywordflow">if</span>(testExternal(argv[0]) != 0) {</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  printf(<span class="stringliteral">&quot;all ok - done\n&quot;</span>);</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"><span class="comment">/*---------------------------------------------------------------------*/</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> testLoadPath() {</div>
<div class="line">  NXhandle h;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span>(getenv(<span class="stringliteral">&quot;NX_LOAD_PATH&quot;</span>) != NULL){</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__c__init.html#ga1029f545c20f5cf742cfe428bcd6e171" title="Open a NeXus file.">NXopen</a> (<span class="stringliteral">&quot;dmc01.hdf&quot;</span>, NXACC_RDWR,&amp;h) != NX_OK) {</div>
<div class="line">      printf(<span class="stringliteral">&quot;Loading NeXus file dmc01.hdf from path %s FAILED\n&quot;</span>, getenv(<span class="stringliteral">&quot;NX_LOAD_PATH&quot;</span>));   </div>
<div class="line">      <span class="keywordflow">return</span> 1;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      printf(<span class="stringliteral">&quot;Success loading NeXus file from path\n&quot;</span>);</div>
<div class="line">      <a class="code" href="group__c__init.html#ga6a770fcad81040878ac24123e4789744" title="close a NeXus file">NXclose</a>(&amp;h);</div>
<div class="line">      <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"><span class="comment">/*---------------------------------------------------------------------*/</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> testExternal(<span class="keywordtype">char</span> *progName){</div>
<div class="line">  <span class="keywordtype">char</span> nxfile[255], ext[5], testFile[80], time[132], filename[256];</div>
<div class="line">  <span class="keywordtype">int</span> create;</div>
<div class="line">  NXhandle hfil;</div>
<div class="line">  <span class="keywordtype">int</span> dummylen = 1;</div>
<div class="line">  <span class="keywordtype">float</span> dummyfloat = 1;</div>
<div class="line">  <span class="keywordtype">float</span> temperature;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span>(strstr(progName,<span class="stringliteral">&quot;hdf4&quot;</span>) != NULL){</div>
<div class="line">    strcpy(ext,<span class="stringliteral">&quot;hdf&quot;</span>);</div>
<div class="line">    create = NXACC_CREATE;</div>
<div class="line">  } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(strstr(progName,<span class="stringliteral">&quot;hdf5&quot;</span>) != NULL){</div>
<div class="line">    strcpy(ext,<span class="stringliteral">&quot;h5&quot;</span>);</div>
<div class="line">    create = NXACC_CREATE5;</div>
<div class="line">  } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(strstr(progName,<span class="stringliteral">&quot;xml&quot;</span>) != NULL){</div>
<div class="line">    strcpy(ext,<span class="stringliteral">&quot;xml&quot;</span>);</div>
<div class="line">    create = NXACC_CREATEXML;</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Failed to recognise napi_test program in testExternal\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  sprintf(testFile,<span class="stringliteral">&quot;nxext.%s&quot;</span>, ext);</div>
<div class="line"></div>
<div class="line">  <span class="comment">/*</span></div>
<div class="line"><span class="comment">    create the test file</span></div>
<div class="line"><span class="comment">  */</span></div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group__c__init.html#ga1029f545c20f5cf742cfe428bcd6e171" title="Open a NeXus file.">NXopen</a>(testFile,create,&amp;hfil) != NX_OK){</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">/*if(NXmakegroup(hfil,&quot;entry1&quot;,&quot;NXentry&quot;) != NX_OK){</span></div>
<div class="line"><span class="comment">    return 1;</span></div>
<div class="line"><span class="comment">  }*/</span></div>
<div class="line">  sprintf(nxfile,<span class="stringliteral">&quot;nxfile://data/dmc01.%s#/entry1&quot;</span>,ext);</div>
<div class="line">  <span class="keywordflow">if</span>(<a name="a35"></a><a class="code" href="group__c__external.html#ga48560757800241697eb23e9863dbffa0" title="Create a link to a group in an external file.">NXlinkexternal</a>(hfil,<span class="stringliteral">&quot;entry1&quot;</span>,<span class="stringliteral">&quot;NXentry&quot;</span>,nxfile) != NX_OK){</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">/*if(NXmakegroup(hfil,&quot;entry2&quot;,&quot;NXentry&quot;) != NX_OK){</span></div>
<div class="line"><span class="comment">    return 1;</span></div>
<div class="line"><span class="comment">  }*/</span></div>
<div class="line">  sprintf(nxfile,<span class="stringliteral">&quot;nxfile://data/dmc02.%s#/entry1&quot;</span>,ext);</div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group__c__external.html#ga48560757800241697eb23e9863dbffa0" title="Create a link to a group in an external file.">NXlinkexternal</a>(hfil,<span class="stringliteral">&quot;entry2&quot;</span>,<span class="stringliteral">&quot;NXentry&quot;</span>,nxfile) != NX_OK){</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group__c__group.html#ga35de508f85ba74c955ff1bb13d793b4c" title="NeXus groups are NeXus way of structuring information into a hierarchy.">NXmakegroup</a>(hfil,<span class="stringliteral">&quot;entry3&quot;</span>,<span class="stringliteral">&quot;NXentry&quot;</span>) != NX_OK){</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group__c__group.html#ga893fe70fe57383b4e4ca44605d35602d" title="Step into a group.">NXopengroup</a>(hfil,<span class="stringliteral">&quot;entry3&quot;</span>,<span class="stringliteral">&quot;NXentry&quot;</span>) != NX_OK){</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">/* force create old style external link */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gac8d92aaf610d08af92db5783e1f43c30" title="Create a multi dimensional data array or dataset.">NXmakedata</a> (hfil, <span class="stringliteral">&quot;extlinkdata&quot;</span>, <a class="code" href="group__c__types.html#gaa6d8b7a88cfbc30f94afd213e4856c3e" title="32 bit float">NX_FLOAT32</a>, 1, &amp;dummylen) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gab34bc6ab4c08020ed15bf74e1434915a" title="Open access to a dataset.">NXopendata</a> (hfil, <span class="stringliteral">&quot;extlinkdata&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#ga5d6d2e19d3aa6b7bd4d88b5635b14ecf" title="Write data to a datset which has previouly been opened with NXopendata.">NXputdata</a> (hfil, &amp;dummyfloat) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">  sprintf(nxfile,<span class="stringliteral">&quot;nxfile://data/dmc01.%s#/entry1/sample/temperature_mean&quot;</span>,ext);</div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group__c__readwrite.html#ga7045cdb5c627800b98e9fecc114c943a" title="Write an attribute.">NXputattr</a>(hfil,<span class="stringliteral">&quot;napimount&quot;</span>,nxfile,strlen(nxfile), NX_CHAR) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">  <span class="comment">/* this would segfault because we are tricking the napi stack</span></div>
<div class="line"><span class="comment">  if(NXclosedata(&amp;hfil) != NX_OK){</span></div>
<div class="line"><span class="comment">    return 1;</span></div>
<div class="line"><span class="comment">  }</span></div>
<div class="line"><span class="comment">  */</span></div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group__c__navigation.html#ga5cb53e2453d85e15de10d1601d790dd2" title="Open the NeXus object with the path specified.">NXopenpath</a>(hfil,<span class="stringliteral">&quot;/entry3&quot;</span>) != NX_OK){</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">/* create new style external link on hdf5 , equivalent to the above on other backends */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a name="a36"></a><a class="code" href="group__c__external.html#gae1c21eeaa7045fd9c57eb52e6880afb2" title="Create a link to a dataset in an external file.">NXlinkexternaldataset</a>(hfil, <span class="stringliteral">&quot;extlinknative&quot;</span>, nxfile) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group__c__init.html#ga6a770fcad81040878ac24123e4789744" title="close a NeXus file">NXclose</a>(&amp;hfil) != NX_OK){</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/*</span></div>
<div class="line"><span class="comment">    actually test linking</span></div>
<div class="line"><span class="comment">  */</span></div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group__c__init.html#ga1029f545c20f5cf742cfe428bcd6e171" title="Open a NeXus file.">NXopen</a>(testFile,NXACC_RDWR,&amp;hfil) != NX_OK){</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group__c__navigation.html#ga5cb53e2453d85e15de10d1601d790dd2" title="Open the NeXus object with the path specified.">NXopenpath</a>(hfil,<span class="stringliteral">&quot;/entry1/start_time&quot;</span>) != NX_OK){</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line">  memset(time,0,132);</div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group__c__readwrite.html#gaf6cb2eb0ddebb3a3f632f8288f43dea0" title="Read a complete dataset from the currently open dataset into memory.">NXgetdata</a>(hfil,time) != NX_OK){</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line">  printf(<span class="stringliteral">&quot;First file time: %s\n&quot;</span>, time);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group__c__metadata.html#ga8539ec124494aaebfd05271e88ee1dd0" title="Inquire the filename of the currently open file.">NXinquirefile</a>(hfil,filename,256) != NX_OK){</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line">  printf(<span class="stringliteral">&quot;NXinquirefile found: %s\n&quot;</span>, relativePathOf(filename));</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group__c__navigation.html#ga5cb53e2453d85e15de10d1601d790dd2" title="Open the NeXus object with the path specified.">NXopenpath</a>(hfil,<span class="stringliteral">&quot;/entry2/sample/sample_name&quot;</span>) != NX_OK){</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line">  memset(time,0,132);</div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group__c__readwrite.html#gaf6cb2eb0ddebb3a3f632f8288f43dea0" title="Read a complete dataset from the currently open dataset into memory.">NXgetdata</a>(hfil,time) != NX_OK){</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line">  printf(<span class="stringliteral">&quot;Second file sample: %s\n&quot;</span>, time);</div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group__c__metadata.html#ga8539ec124494aaebfd05271e88ee1dd0" title="Inquire the filename of the currently open file.">NXinquirefile</a>(hfil,filename,256) != NX_OK){</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line">  printf(<span class="stringliteral">&quot;NXinquirefile found: %s\n&quot;</span>, relativePathOf(filename));</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group__c__navigation.html#ga5cb53e2453d85e15de10d1601d790dd2" title="Open the NeXus object with the path specified.">NXopenpath</a>(hfil,<span class="stringliteral">&quot;/entry2/start_time&quot;</span>) != NX_OK){</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line">  memset(time,0,132);</div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group__c__readwrite.html#gaf6cb2eb0ddebb3a3f632f8288f43dea0" title="Read a complete dataset from the currently open dataset into memory.">NXgetdata</a>(hfil,time) != NX_OK){</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line">  printf(<span class="stringliteral">&quot;Second file time: %s\n&quot;</span>, time);</div>
<div class="line">  <a class="code" href="group__c__navigation.html#ga5cb53e2453d85e15de10d1601d790dd2" title="Open the NeXus object with the path specified.">NXopenpath</a>(hfil,<span class="stringliteral">&quot;/&quot;</span>);</div>
<div class="line">  <span class="keywordflow">if</span>(<a name="a37"></a><a class="code" href="group__c__external.html#ga809cdbe642a82e53d3bce8a0b3d78068" title="Test if a group is actually pointing to an external file.">NXisexternalgroup</a>(hfil,<span class="stringliteral">&quot;entry1&quot;</span>,<span class="stringliteral">&quot;NXentry&quot;</span>,filename,255) != NX_OK){</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    printf(<span class="stringliteral">&quot;entry1 external URL = %s\n&quot;</span>, filename);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  printf(<span class="stringliteral">&quot;testing link to external data set\n&quot;</span>);</div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group__c__navigation.html#ga5cb53e2453d85e15de10d1601d790dd2" title="Open the NeXus object with the path specified.">NXopenpath</a>(hfil,<span class="stringliteral">&quot;/entry3&quot;</span>) != NX_OK){</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span>(<a name="a38"></a><a class="code" href="group__c__external.html#ga1866a6ca6d58437920084684ed6fa2d1" title="Test if a dataset is actually pointing to an external file.">NXisexternaldataset</a>(hfil,<span class="stringliteral">&quot;extlinkdata&quot;</span>,filename,255) != NX_OK){</div>
<div class="line">    printf(<span class="stringliteral">&quot;extlinkdata should be external link\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    printf(<span class="stringliteral">&quot;extlinkdata external URL = %s\n&quot;</span>, filename);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gab34bc6ab4c08020ed15bf74e1434915a" title="Open access to a dataset.">NXopendata</a> (hfil, <span class="stringliteral">&quot;extlinkdata&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">  memset(&amp;temperature,0,4);</div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group__c__readwrite.html#gaf6cb2eb0ddebb3a3f632f8288f43dea0" title="Read a complete dataset from the currently open dataset into memory.">NXgetdata</a>(hfil,&amp;temperature) != NX_OK){</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line">  printf(<span class="stringliteral">&quot;value retrieved: %4.2f\n&quot;</span>, temperature);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group__c__navigation.html#ga5cb53e2453d85e15de10d1601d790dd2" title="Open the NeXus object with the path specified.">NXopenpath</a>(hfil,<span class="stringliteral">&quot;/entry3&quot;</span>) != NX_OK){</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group__c__external.html#ga1866a6ca6d58437920084684ed6fa2d1" title="Test if a dataset is actually pointing to an external file.">NXisexternaldataset</a>(hfil,<span class="stringliteral">&quot;extlinknative&quot;</span>,filename,255) != NX_OK){</div>
<div class="line">    printf(<span class="stringliteral">&quot;extlinknative should be external link\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    printf(<span class="stringliteral">&quot;extlinknative external URL = %s\n&quot;</span>, filename);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__c__readwrite.html#gab34bc6ab4c08020ed15bf74e1434915a" title="Open access to a dataset.">NXopendata</a> (hfil, <span class="stringliteral">&quot;extlinknative&quot;</span>) != NX_OK) <span class="keywordflow">return</span> 1;</div>
<div class="line">  memset(&amp;temperature,0,4);</div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group__c__readwrite.html#gaf6cb2eb0ddebb3a3f632f8288f43dea0" title="Read a complete dataset from the currently open dataset into memory.">NXgetdata</a>(hfil,&amp;temperature) != NX_OK){</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line">  printf(<span class="stringliteral">&quot;value retrieved: %4.2f\n&quot;</span>, temperature);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="group__c__init.html#ga6a770fcad81040878ac24123e4789744" title="close a NeXus file">NXclose</a>(&amp;hfil);</div>
<div class="line">  printf(<span class="stringliteral">&quot;External File Linking tested OK\n&quot;</span>);</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"><span class="comment">/*----------------------------------------------------------------------*/</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">print_data (<span class="keyword">const</span> <span class="keywordtype">char</span> *prefix, <span class="keywordtype">void</span> *data, <span class="keywordtype">int</span> type, <span class="keywordtype">int</span> num)</div>
<div class="line">{</div>
<div class="line">  <span class="keywordtype">int</span> i;</div>
<div class="line">  printf (<span class="stringliteral">&quot;%s&quot;</span>, prefix);</div>
<div class="line">  <span class="keywordflow">for</span> (i = 0; i &lt; num; i++) {</div>
<div class="line">      <span class="keywordflow">switch</span> (type) {</div>
<div class="line">        <span class="keywordflow">case</span> NX_CHAR:</div>
<div class="line">           printf (<span class="stringliteral">&quot;%c&quot;</span>, ((<span class="keywordtype">char</span> *) data)[i]);</div>
<div class="line">           <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">case</span> NX_INT8:</div>
<div class="line">           printf (<span class="stringliteral">&quot; %d&quot;</span>, ((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) data)[i]);</div>
<div class="line">           <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">case</span> NX_INT16:</div>
<div class="line">           printf (<span class="stringliteral">&quot; %d&quot;</span>, ((<span class="keywordtype">short</span> *) data)[i]);</div>
<div class="line">           <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">case</span> NX_INT32:</div>
<div class="line">           printf (<span class="stringliteral">&quot; %d&quot;</span>, ((<span class="keywordtype">int</span> *) data)[i]);</div>
<div class="line">           <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">case</span> NX_INT64:</div>
<div class="line">           printf (<span class="stringliteral">&quot; %lld&quot;</span>, (<span class="keywordtype">long</span> <span class="keywordtype">long</span>)((int64_t *) data)[i]);</div>
<div class="line">           <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">case</span> NX_UINT64:</div>
<div class="line">           printf (<span class="stringliteral">&quot; %llu&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>)((uint64_t *) data)[i]);</div>
<div class="line">           <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__c__types.html#gaa6d8b7a88cfbc30f94afd213e4856c3e" title="32 bit float">NX_FLOAT32</a>:</div>
<div class="line">           printf (<span class="stringliteral">&quot; %f&quot;</span>, ((<span class="keywordtype">float</span> *) data)[i]);</div>
<div class="line">           <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">case</span> NX_FLOAT64:</div>
<div class="line">           printf (<span class="stringliteral">&quot; %f&quot;</span>, ((<span class="keywordtype">double</span> *) data)[i]);</div>
<div class="line">           <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">           printf (<span class="stringliteral">&quot;print_data: invalid type&quot;</span>);</div>
<div class="line">           <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">     }</div>
<div class="line">  printf (<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.1
</small></address>
</body>
</html>
